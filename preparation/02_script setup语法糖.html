<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue3 script setup è¯­æ³•ç³–è¯¦è§£ | zhang_Blog</title>
    <meta name="description" content="zhang_Blog technical documentation">
    <link rel="stylesheet" href="/Zhang_blog/assets/style.706eb0fc.css">
    <link rel="modulepreload" href="/Zhang_blog/assets/chunks/AlgoliaSearchBox.d5203330.js">
    <link rel="modulepreload" href="/Zhang_blog/assets/app.b3477ce4.js">
    <link rel="modulepreload" href="/Zhang_blog/assets/preparation_02_script setupè¯­æ³•ç³–.md.3f6e6438.lean.js">
    
    <meta name="twitter:title" content="Vue3 script setup è¯­æ³•ç³–è¯¦è§£ | zhang_Blog">
  <meta property="og:title" content="Vue3 script setup è¯­æ³•ç³–è¯¦è§£ | zhang_Blog">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/Zhang_blog/" aria-label="zhang_Blog, back to home" data-v-675d8756 data-v-cc01ef16><!----> zhang_Blog</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/Zhang_blog/" data-v-b8818f8c>å‰ç«¯ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/Zhang_blog/preparation/01_promise" data-v-b8818f8c>ç®—æ³• <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/Zhang_blog/" data-v-b8818f8c>å‰ç«¯ <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/Zhang_blog/preparation/01_promise" data-v-b8818f8c>ç®—æ³• <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">å­¦ä¹ å†…å®¹</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/01_promise">1.è¿™æ¬¡ ä¸€æ¬¡æ€§ææ‡‚promise</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/Zhang_blog/preparation/02_script setupè¯­æ³•ç³–">2.script setupè¯­æ³•ç³–</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#script-setup-è¯­æ³•ç³–">script setup è¯­æ³•ç³–</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#è°ƒç”¨æ—¶æœº">è°ƒç”¨æ—¶æœº</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setup-å‚æ•°">setup å‚æ•°</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç»„ä»¶è‡ªåŠ¨æ³¨å†Œ">ç»„ä»¶è‡ªåŠ¨æ³¨å†Œ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç»„ä»¶æ ¸å¿ƒ-api-çš„ä½¿ç”¨">ç»„ä»¶æ ¸å¿ƒ API çš„ä½¿ç”¨</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#ä½¿ç”¨props">ä½¿ç”¨props</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä½¿ç”¨emit">ä½¿ç”¨emit</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#çˆ¶å­ç»„ä»¶é€šä¿¡">çˆ¶å­ç»„ä»¶é€šä¿¡</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å®šä¹‰å“åº”å˜é‡ã€å‡½æ•°ã€ç›‘å¬ã€è®¡ç®—å±æ€§computed">å®šä¹‰å“åº”å˜é‡ã€å‡½æ•°ã€ç›‘å¬ã€è®¡ç®—å±æ€§computed</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#reactive">reactive</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ref-æš´éœ²å˜é‡åˆ°æ¨¡æ¿">ref æš´éœ²å˜é‡åˆ°æ¨¡æ¿</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç”Ÿå‘½å‘¨æœŸæ–¹æ³•">ç”Ÿå‘½å‘¨æœŸæ–¹æ³•</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#defineexpose-api">defineExpose API</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å±æ€§å’Œæ–¹æ³•æ— éœ€è¿”å›ï¼Œç›´æ¥ä½¿ç”¨ï¼">å±æ€§å’Œæ–¹æ³•æ— éœ€è¿”å›ï¼Œç›´æ¥ä½¿ç”¨ï¼</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æ”¯æŒ-async-await-å¼‚æ­¥">æ”¯æŒ async await å¼‚æ­¥</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å®šä¹‰ç»„ä»¶å…¶ä»–é…ç½®">å®šä¹‰ç»„ä»¶å…¶ä»–é…ç½®</a><!----></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/03_mysql80å®‰è£…æ•™ç¨‹">3.mysql80å®‰è£…æ•™ç¨‹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/04_Reactç¬”è®°">4.Reactç¬”è®°</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/05_stylusæ ·å¼è½¬æ¢æˆsass scss">5.stylusæ ·å¼è½¬æ¢æˆsass scss</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">ç®—æ³•å­¦ä¹ </p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/04_Reactç¬”è®°">4.Reactç¬”è®°</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">å‰ç«¯åŸºç¡€</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/å‰ç«¯åŸºç¡€/01.HTMLç¯‡">1.HTMLç¯‡</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/å‰ç«¯åŸºç¡€/02.CSSç¯‡">2.CSSç¯‡</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/å‰ç«¯åŸºç¡€/03.ä¸‰ç§æœ¬åœ°å­˜å‚¨çš„åŒºåˆ«">3.ä¸‰ç§æœ¬åœ°å­˜å‚¨çš„åŒºåˆ«</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/å‰ç«¯åŸºç¡€/04.promiseæ˜¯ä»€ä¹ˆä¸ä½¿ç”¨æ–¹æ³•">4.promiseæ˜¯ä»€ä¹ˆä¸ä½¿ç”¨æ–¹æ³•</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/å‰ç«¯åŸºç¡€/05.JSæ•°æ®ç±»å‹">5.JSæ•°æ®ç±»å‹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/å‰ç«¯åŸºç¡€/06.JavaScriptæœ‰å‡ ç§æ–¹æ³•åˆ¤æ–­å˜é‡çš„ç±»å‹">6.JavaScriptæœ‰å‡ ç§æ–¹æ³•åˆ¤æ–­å˜é‡çš„ç±»å‹</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/å‰ç«¯åŸºç¡€/08.varã€letã€constä¹‹é—´çš„åŒºåˆ«">8.varã€letã€constä¹‹é—´çš„åŒºåˆ«</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/Zhang_blog/preparation/å‰ç«¯åŸºç¡€/09.å€æ è¾“å…¥ URL æ•²ä¸‹å›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆ">9.å€æ è¾“å…¥ URL æ•²ä¸‹å›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆ</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="vue3-script-setup-è¯­æ³•ç³–è¯¦è§£" tabindex="-1">Vue3 script setup è¯­æ³•ç³–è¯¦è§£ <a class="header-anchor" href="#vue3-script-setup-è¯­æ³•ç³–è¯¦è§£" aria-hidden="true">#</a></h1><h2 id="script-setup-è¯­æ³•ç³–" tabindex="-1">script setup è¯­æ³•ç³– <a class="header-anchor" href="#script-setup-è¯­æ³•ç³–" aria-hidden="true">#</a></h2><p>æ–°çš„ <code>setup</code> é€‰é¡¹æ˜¯åœ¨ç»„ä»¶åˆ›å»º<strong>ä¹‹å‰</strong>, <code>props</code> è¢«è§£æä¹‹åæ‰§è¡Œï¼Œæ˜¯ç»„åˆå¼ API çš„å…¥å£ã€‚</p><blockquote><p>åœ¨ <code>setup</code> ä¸­ä½ åº”è¯¥é¿å…ä½¿ç”¨ <code>this</code>ï¼Œå› ä¸ºå®ƒä¸ä¼šæ‰¾åˆ°ç»„ä»¶å®ä¾‹ã€‚<code>setup</code> çš„è°ƒç”¨å‘ç”Ÿåœ¨ <code>data</code> propertyã€<code>computed</code> property æˆ– <code>methods</code> è¢«è§£æä¹‹å‰ï¼Œæ‰€ä»¥å®ƒä»¬æ— æ³•&gt;åœ¨ <code>setup</code> ä¸­è¢«è·å–ã€‚</p></blockquote><p>å®ƒæ˜¯ Vue3 çš„ä¸€ä¸ªæ–°è¯­æ³•ç³–ï¼Œåœ¨ <code>setup</code> å‡½æ•°ä¸­ã€‚æ‰€æœ‰ ES æ¨¡å—å¯¼å‡ºéƒ½è¢«è®¤ä¸ºæ˜¯æš´éœ²ç»™ä¸Šä¸‹æ–‡çš„å€¼ï¼Œå¹¶åŒ…å«åœ¨ setup() è¿”å›å¯¹è±¡ä¸­ã€‚ç›¸å¯¹äºä¹‹å‰çš„å†™æ³•ï¼Œä½¿ç”¨åï¼Œè¯­æ³•ä¹Ÿå˜å¾—æ›´ç®€å•ã€‚</p><blockquote><p>åœ¨æ·»åŠ äº†setupçš„scriptæ ‡ç­¾ä¸­ï¼Œ<strong>æˆ‘ä»¬ä¸å¿…å£°æ˜å’Œæ–¹æ³•ï¼Œè¿™ç§å†™æ³•ä¼šè‡ªåŠ¨å°†æ‰€æœ‰é¡¶çº§å˜é‡ã€å‡½æ•°ï¼Œå‡ä¼šè‡ªåŠ¨æš´éœ²ç»™æ¨¡æ¿ï¼ˆtemplateï¼‰ä½¿ç”¨</strong></p><p>è¿™é‡Œå¼ºè°ƒä¸€å¥ â€œ<strong>æš´éœ²ç»™æ¨¡æ¿ï¼Œè·Ÿæš´éœ²ç»™å¤–éƒ¨ä¸æ˜¯ä¸€å›äº‹</strong></p></blockquote><p>ä½¿ç”¨æ–¹å¼æå…¶ç®€å•ï¼Œä»…éœ€è¦åœ¨ <code>script</code> æ ‡ç­¾åŠ ä¸Š <code>setup</code> å…³é”®å­—å³å¯ã€‚ç¤ºä¾‹ï¼š</p><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>è¯¥setupåŠŸèƒ½æ˜¯æ–°çš„ç»„ä»¶é€‰é¡¹ã€‚å®ƒæ˜¯ç»„ä»¶å†…éƒ¨æš´éœ²å‡ºæ‰€æœ‰çš„å±æ€§å’Œæ–¹æ³•çš„ç»Ÿä¸€APIã€‚</p><p>ä½¿ç”¨åæ„å‘³ç€ï¼Œscriptæ ‡ç­¾å†…çš„å†…å®¹ç›¸å½“äºåŸæœ¬ç»„ä»¶å£°æ˜ä¸­setup()çš„å‡½æ•°ä½“ï¼Œä¸è¿‡ä¹Ÿæœ‰ä¸€å®šçš„åŒºåˆ«ã€‚</p><p>ä½¿ç”¨ script setup è¯­æ³•ç³–ï¼Œç»„ä»¶åªéœ€å¼•å…¥ä¸ç”¨æ³¨å†Œï¼Œå±æ€§å’Œæ–¹æ³•ä¹Ÿä¸ç”¨è¿”å›ï¼Œä¹Ÿä¸ç”¨å†™setupå‡½æ•°ï¼Œä¹Ÿä¸ç”¨å†™export default ï¼Œç”šè‡³æ˜¯è‡ªå®šä¹‰æŒ‡ä»¤ä¹Ÿå¯ä»¥åœ¨æˆ‘ä»¬çš„templateä¸­è‡ªåŠ¨è·å¾—ã€‚<a href="https://v3.cn.vuejs.org/api/sfc-script-setup.html#%E4%BD%BF%E7%94%A8%E7%BB%84%E4%BB%B6" target="_blank" rel="noopener noreferrer">åŸºæœ¬è¯­æ³•</a></p><h2 id="è°ƒç”¨æ—¶æœº" tabindex="-1">è°ƒç”¨æ—¶æœº <a class="header-anchor" href="#è°ƒç”¨æ—¶æœº" aria-hidden="true">#</a></h2><p>åˆ›å»ºç»„ä»¶å®ä¾‹ï¼Œç„¶ååˆå§‹åŒ– props ï¼Œç´§æ¥ç€å°±è°ƒç”¨setup å‡½æ•°ã€‚ä»ç”Ÿå‘½å‘¨æœŸé’©å­çš„è§†è§’æ¥çœ‹ï¼Œå®ƒä¼šåœ¨ beforeCreate é’©å­ä¹‹å‰è¢«è°ƒç”¨.</p><h2 id="setup-å‚æ•°" tabindex="-1">setup å‚æ•° <a class="header-anchor" href="#setup-å‚æ•°" aria-hidden="true">#</a></h2><ol><li><strong>ã€Œpropsã€</strong> ç¬¬ä¸€ä¸ªå‚æ•°æ¥å—ä¸€ä¸ªå“åº”å¼çš„propsï¼Œè¿™ä¸ªpropsæŒ‡å‘çš„æ˜¯å¤–éƒ¨çš„propsã€‚å¦‚æœä½ æ²¡æœ‰å®šä¹‰propsé€‰é¡¹ï¼Œsetupä¸­çš„ç¬¬ä¸€ä¸ªå‚æ•°å°†ä¸ºundifinedã€‚propså’Œvue2.xå¹¶æ— ä»€ä¹ˆä¸åŒ,ä»ç„¶éµå¾ªä»¥å‰çš„åŸåˆ™ï¼›</li></ol><ul><li>ä¸è¦åœ¨å­ç»„ä»¶ä¸­ä¿®æ”¹propsï¼›å¦‚æœä½ å°è¯•ä¿®æ”¹ï¼Œå°†ä¼šç»™ä½ è­¦å‘Šç”šè‡³æŠ¥é”™ã€‚</li><li>ä¸è¦è§£æ„propsã€‚ç»“æ„çš„propsä¼šå¤±å»å“åº”æ€§ã€‚</li></ul><p>2.<strong>ã€Œcontextã€</strong> ç¬¬äºŒä¸ªå‚æ•°æä¾›äº†ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œä»åŸæ¥ 2.x ä¸­ this é€‰æ‹©æ€§åœ°æš´éœ²äº†ä¸€äº› propertyã€‚</p><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props, context<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 context<span class="token punctuation">.</span>attrs
 context<span class="token punctuation">.</span>slots
 context<span class="token punctuation">.</span>emit 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åƒè¿™æ ·ï¼Œåªè¦åœ¨setupå¤„å£°æ˜å³å¯è‡ªåŠ¨å¯¼å…¥ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒè§£æ„è¯­æ³•ï¼š</p><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>props, { emit }<span class="token punctuation">&quot;</span></span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="ç»„ä»¶è‡ªåŠ¨æ³¨å†Œ" tabindex="-1">ç»„ä»¶è‡ªåŠ¨æ³¨å†Œ <a class="header-anchor" href="#ç»„ä»¶è‡ªåŠ¨æ³¨å†Œ" aria-hidden="true">#</a></h2><p>å¯¼å…¥ component æˆ– directive ç›´æ¥importå³å¯ï¼Œæ— éœ€é¢å¤–å£°æ˜</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MyButton <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/components&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> directive <span class="token keyword">as</span> clickOutside <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;v-click-outside&#39;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸åŸå…ˆä¸€æ ·ï¼Œæ¨¡æ¿ä¸­ä¹Ÿæ”¯æŒä½¿ç”¨kabab-caseæ¥åˆ›å»ºç»„ä»¶ï¼Œå¦‚ï¼š</p><p>åœ¨ script setup ä¸­ï¼Œå¼•å…¥çš„ç»„ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€å†é€šè¿‡<code>components</code>è¿›è¡Œæ³¨å†Œï¼Œå¹¶ä¸”æ— æ³•æŒ‡å®šå½“å‰ç»„ä»¶çš„åå­—ï¼Œå®ƒä¼šè‡ªåŠ¨ä»¥æ–‡ä»¶åä¸ºä¸»ï¼Œä¹Ÿå°±æ˜¯ä¸ç”¨å†å†™<code>name</code>å±æ€§äº†ã€‚</p><p>ç¤ºä¾‹ï¼š</p><div class="language-html line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">&quot;./components/HelloWorld.vue&quot;</span><span class="token punctuation">;</span> <span class="token comment">//æ­¤å¤„ä½¿ç”¨ Vetur æ’ä»¶ä¼šæŠ¥çº¢</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>å¦‚æœéœ€è¦å®šä¹‰ç±»ä¼¼ name çš„å±æ€§ï¼Œå¯ä»¥å†åŠ ä¸ªå¹³çº§çš„ script æ ‡ç­¾ï¼Œåœ¨é‡Œé¢å®ç°å³å¯ã€‚</p><h2 id="ç»„ä»¶æ ¸å¿ƒ-api-çš„ä½¿ç”¨" tabindex="-1">ç»„ä»¶æ ¸å¿ƒ API çš„ä½¿ç”¨ <a class="header-anchor" href="#ç»„ä»¶æ ¸å¿ƒ-api-çš„ä½¿ç”¨" aria-hidden="true">#</a></h2><h3 id="ä½¿ç”¨props" tabindex="-1">ä½¿ç”¨props <a class="header-anchor" href="#ä½¿ç”¨props" aria-hidden="true">#</a></h3><p>é€šè¿‡<code>defineProps</code>æŒ‡å®šå½“å‰ props ç±»å‹ï¼Œè·å¾—ä¸Šä¸‹æ–‡çš„propså¯¹è±¡ã€‚ç¤ºä¾‹ï¼š</p><div class="language-vue line-numbers-mode"><pre><code><span class="token comment">&lt;!-- src/App.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">&quot;./components/HelloWorld&quot;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token attr-name">msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Hello Vue script setup<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-vue line-numbers-mode"><pre><code><span class="token comment">&lt;!-- src/components/HelloWorld.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// å®šä¹‰è¯¥ç»„ä»¶æ¥æ”¶çš„ Props</span>
<span class="token comment">// defineProps åœ¨æ­¤å¤„å¯ä»¥ç›´æ¥ä½¿ç”¨æ— éœ€å¯¼å…¥</span>
<span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">msg</span><span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  {{ msg }}
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="ä½¿ç”¨emit" tabindex="-1">ä½¿ç”¨emit <a class="header-anchor" href="#ä½¿ç”¨emit" aria-hidden="true">#</a></h3><p>ä½¿ç”¨<code>defineEmit</code>å®šä¹‰å½“å‰ç»„ä»¶å«æœ‰çš„äº‹ä»¶ï¼Œå¹¶é€šè¿‡è¿”å›çš„ä¸Šä¸‹æ–‡å»æ‰§è¡Œ emitã€‚ç¤ºä¾‹ï¼š</p><div class="language-vue line-numbers-mode"><pre><code><span class="token comment">&lt;!-- src/components/HelloWorld.vue --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// defineEmits åœ¨æ­¤å¤„å¯ä»¥ç›´æ¥ä½¿ç”¨æ— éœ€å¯¼å…¥</span>
<span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;delete&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>$emit(&#39;delete&#39;)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>delete button<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="çˆ¶å­ç»„ä»¶é€šä¿¡" tabindex="-1">çˆ¶å­ç»„ä»¶é€šä¿¡ <a class="header-anchor" href="#çˆ¶å­ç»„ä»¶é€šä¿¡" aria-hidden="true">#</a></h3><p><strong>defineProps</strong> ç”¨æ¥æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„ props ; <strong>defineEmits</strong> ç”¨æ¥å£°æ˜è§¦å‘çš„äº‹ä»¶ã€‚</p><div class="language-vue line-numbers-mode"><pre><code>//çˆ¶ç»„ä»¶
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-son</span> <span class="token attr-name">foo</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@childClick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>childClick<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> MySon <span class="token keyword">from</span> <span class="token string">&quot;./MySon.vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> childClick <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token operator">:</span> any<span class="token punctuation">)</span><span class="token operator">:</span><span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;from sonï¼š&#39;</span><span class="token punctuation">,</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€ğŸš€</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>


//å­ç»„ä»¶
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sonToFather<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ä¿¡æ¯:{{ props.foo }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineEmits<span class="token punctuation">,</span> defineProps<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;childClick&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">// å£°æ˜è§¦å‘äº‹ä»¶ childClick</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// è·å–props</span>

<span class="token keyword">const</span> <span class="token function-variable function">sonToFather</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;childClick&#39;</span> <span class="token punctuation">,</span> props<span class="token punctuation">.</span>foo<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>å­ç»„ä»¶é€šè¿‡ defineProps æ¥æ”¶çˆ¶ç»„ä»¶ä¼ è¿‡æ¥çš„æ•°æ®ï¼Œå­ç»„ä»¶é€šè¿‡ defineEmits å®šä¹‰äº‹ä»¶å‘é€ä¿¡æ¯ç»™çˆ¶ç»„ä»¶</p><p>å¢å¼ºçš„propsç±»å‹å®šä¹‰ï¼š</p><div class="language-vue line-numbers-mode"><pre><code>const props = defineProps<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>{</span>
  <span class="token attr-name"><span class="token namespace">foo:</span></span> <span class="token attr-name">string</span>
  <span class="token attr-name"><span class="token namespace">bar?:</span></span> <span class="token attr-name">number</span>
<span class="token attr-name">}</span><span class="token punctuation">&gt;</span></span>()

const emit = defineEmit&lt;(e: &#39;update&#39; | &#39;delete&#39;, id: number) =&gt; void&gt;()

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="å®šä¹‰å“åº”å˜é‡ã€å‡½æ•°ã€ç›‘å¬ã€è®¡ç®—å±æ€§computed" tabindex="-1">å®šä¹‰å“åº”å˜é‡ã€å‡½æ•°ã€ç›‘å¬ã€è®¡ç®—å±æ€§computed <a class="header-anchor" href="#å®šä¹‰å“åº”å˜é‡ã€å‡½æ•°ã€ç›‘å¬ã€è®¡ç®—å±æ€§computed" aria-hidden="true">#</a></h3><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"> 
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span>computed<span class="token punctuation">,</span>watchEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ä¸ç”¨ return ï¼Œç›´æ¥åœ¨ templete ä¸­ä½¿ç”¨</span>

<span class="token keyword">const</span> <span class="token function-variable function">addCount</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span> <span class="token comment">//å®šä¹‰å‡½æ•°ï¼Œä½¿ç”¨åŒä¸Š </span>
    count<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 

<span class="token comment">//å®šä¹‰è®¡ç®—å±æ€§ï¼Œä½¿ç”¨åŒä¸Š</span>
<span class="token keyword">const</span> howCount<span class="token operator">=</span><span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token string">&quot;ç°åœ¨countå€¼ä¸ºï¼š&quot;</span><span class="token operator">+</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//å®šä¹‰ç›‘å¬ï¼Œä½¿ç”¨åŒä¸Š //...some code else </span>
<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="watcheffect" tabindex="-1">watchEffect <a class="header-anchor" href="#watcheffect" aria-hidden="true">#</a></h4><p>ç”¨äºæœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œä¼šè‡ªåŠ¨æ”¶é›†ä¾èµ–ã€‚</p><h4 id="å’ŒwatchåŒºåˆ«" tabindex="-1">å’ŒwatchåŒºåˆ« <a class="header-anchor" href="#å’ŒwatchåŒºåˆ«" aria-hidden="true">#</a></h4><p>æ— éœ€åŒºåˆ†deepï¼Œimmediateï¼Œåªè¦ä¾èµ–çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè°ƒç”¨</p><h3 id="reactive" tabindex="-1">reactive <a class="header-anchor" href="#reactive" aria-hidden="true">#</a></h3><p>æ­¤æ—¶nameåªä¼šåœ¨åˆæ¬¡åˆ›å»ºçš„æ—¶å€™è¿›è¡Œèµ‹å€¼ï¼Œå¦‚æœä¸­é—´æƒ³è¦æ”¹å˜nameçš„å€¼ï¼Œé‚£ä¹ˆéœ€è¦å€ŸåŠ©composition api ä¸­çš„reactiveã€‚</p><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> onUnmounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">counter</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// å®šæ—¶å™¨ æ¯ç§’éƒ½ä¼šæ›´æ–°æ•°æ®</span>
<span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>counter<span class="token operator">++</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{state.counter}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>ä½¿ç”¨refä¹Ÿèƒ½è¾¾åˆ°æˆ‘ä»¬é¢„æœŸçš„&#39;counter&#39;,å¹¶ä¸”åœ¨æ¨¡æ¿ä¸­,vueè¿›è¡Œäº†å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨counterè€Œä¸ç”¨å†™counter.value.</p><p><strong>refå’Œreactiveçš„å…³ç³»</strong>:</p><p>refæ˜¯ä¸€ä¸ª{value:&#39;xxxx&#39;}çš„ç»“æ„ï¼Œvalueæ˜¯ä¸€ä¸ªreactiveå¯¹è±¡</p><h3 id="ref-æš´éœ²å˜é‡åˆ°æ¨¡æ¿" tabindex="-1">ref æš´éœ²å˜é‡åˆ°æ¨¡æ¿ <a class="header-anchor" href="#ref-æš´éœ²å˜é‡åˆ°æ¨¡æ¿" aria-hidden="true">#</a></h3><p>æ›¾ç»çš„ææ¡ˆä¸­ï¼Œå¦‚æœéœ€è¦æš´éœ²å˜é‡åˆ°æ¨¡æ¿ï¼Œéœ€è¦åœ¨å˜é‡å‰åŠ å…¥exportå£°æ˜ï¼š</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">export</span> <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¸è¿‡åœ¨æ–°ç‰ˆçš„ææ¡ˆä¸­ï¼Œæ— éœ€exportå£°æ˜ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å¯»æ‰¾æ¨¡æ¿ä¸­ä½¿ç”¨çš„å˜é‡ï¼Œåªéœ€åƒä¸‹é¢è¿™æ ·ç®€å•çš„å£°æ˜ï¼Œå³å¯åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¯¥å˜é‡</p><div class="language-html line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

<span class="token keyword">const</span> counter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸ç”¨ return ï¼Œç›´æ¥åœ¨ templete ä¸­ä½¿ç”¨</span>

<span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    counter<span class="token punctuation">.</span>value<span class="token operator">++</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>{{counter}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="ç”Ÿå‘½å‘¨æœŸæ–¹æ³•" tabindex="-1">ç”Ÿå‘½å‘¨æœŸæ–¹æ³• <a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸæ–¹æ³•" aria-hidden="true">#</a></h3><p>å› ä¸º <code>setup</code> æ˜¯å›´ç»• <code>beforeCreate</code> å’Œ <code>created</code> ç”Ÿå‘½å‘¨æœŸé’©å­è¿è¡Œçš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ˜¾å¼åœ°å®šä¹‰å®ƒä»¬ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨è¿™äº›é’©å­ä¸­ç¼–å†™çš„ä»»ä½•ä»£ç éƒ½åº”è¯¥ç›´æ¥åœ¨ <code>setup</code> å‡½æ•°ä¸­ç¼–å†™ã€‚</p><p>å¯ä»¥é€šè¿‡åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­å‰é¢åŠ ä¸Š â€œonâ€ æ¥è®¿é—®ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸé’©å­ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fv3.cn.vuejs.org%2Fguide%2Fcomposition-api-lifecycle-hooks.html" target="_blank" rel="noopener noreferrer">å®˜ç½‘ï¼šç”Ÿå‘½å‘¨æœŸé’©å­</a></p><p>ä¸‹è¡¨åŒ…å«å¦‚ä½•åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fv3.cn.vuejs.org%2Fguide%2Fcomposition-api-setup.html" target="_blank" rel="noopener noreferrer">setup ()</a> å†…éƒ¨è°ƒç”¨ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š</p><table><thead><tr><th>é€‰é¡¹å¼ API</th><th>Hook inside <code>setup</code></th></tr></thead><tbody><tr><td><code>beforeCreate</code></td><td>Not needed*</td></tr><tr><td><code>created</code></td><td>Not needed*</td></tr><tr><td><code>beforeMount</code></td><td><code>onBeforeMount</code></td></tr><tr><td><code>mounted</code></td><td><code>onMounted</code></td></tr><tr><td><code>beforeUpdate</code></td><td><code>onBeforeUpdate</code></td></tr><tr><td><code>updated</code></td><td><code>onUpdated</code></td></tr><tr><td><code>beforeUnmount</code></td><td><code>onBeforeUnmount</code></td></tr><tr><td><code>unmounted</code></td><td><code>onUnmounted</code></td></tr><tr><td><code>errorCaptured</code></td><td><code>onErrorCaptured</code></td></tr><tr><td><code>renderTracked</code></td><td><code>onRenderTracked</code></td></tr><tr><td><code>renderTriggered</code></td><td><code>onRenderTriggered</code></td></tr><tr><td><code>activated</code></td><td><code>onActivated</code></td></tr><tr><td><code>deactivated</code></td><td><code>onDeactivated</code></td></tr></tbody></table><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"> 
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;mounted!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="è·å–-slots-å’Œ-attrs" tabindex="-1">è·å– slots å’Œ attrs <a class="header-anchor" href="#è·å–-slots-å’Œ-attrs" aria-hidden="true">#</a></h4><blockquote><p>æ³¨ï¼šuseContext API è¢«å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æ›´åŠ ç»†åˆ†çš„ apiã€‚</p></blockquote><p>å¯ä»¥é€šè¿‡<code>useContext</code>ä»ä¸Šä¸‹æ–‡ä¸­è·å– slots å’Œ attrsã€‚ä¸è¿‡ææ¡ˆåœ¨æ­£å¼é€šè¿‡åï¼ŒåºŸé™¤äº†è¿™ä¸ªè¯­æ³•ï¼Œè¢«æ‹†åˆ†æˆäº†<code>useAttrs</code>å’Œ<code>useSlots</code>ã€‚</p><ol><li><code>useAttrs</code>ï¼šè§åçŸ¥æ„ï¼Œè¿™æ˜¯ç”¨æ¥è·å– attrs æ•°æ®ï¼Œä½†æ˜¯è¿™å’Œ vue2 ä¸åŒï¼Œé‡Œé¢åŒ…å«äº† <code>class</code>ã€<code>å±æ€§</code>ã€<code>æ–¹æ³•</code>ã€‚</li></ol><div class="language-html line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">v-bind</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>attrs<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>srcipt</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#39;</span>ts<span class="token punctuation">&#39;</span></span><span class="token punctuation">&gt;</span></span>
   const attrs = useAttrs();
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
å¤åˆ¶ä»£ç 
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol><li><code>useSlots</code>: é¡¾åæ€ä¹‰ï¼Œè·å–æ’æ§½æ•°æ®ã€‚</li></ol><p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p><div class="language-html line-numbers-mode"><pre><code>// æ—§
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> useContext <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> slots<span class="token punctuation">,</span> attrs <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

// æ–°
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> useAttrs<span class="token punctuation">,</span> useSlots <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>

  <span class="token keyword">const</span> attrs <span class="token operator">=</span> <span class="token function">useAttrs</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> slots <span class="token operator">=</span> <span class="token function">useSlots</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="defineexpose-api" tabindex="-1">defineExpose API <a class="header-anchor" href="#defineexpose-api" aria-hidden="true">#</a></h3><p>ä¼ ç»Ÿçš„å†™æ³•ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œé€šè¿‡ ref å®ä¾‹çš„æ–¹å¼å»è®¿é—®å­ç»„ä»¶çš„å†…å®¹ï¼Œä½†åœ¨ script setup ä¸­ï¼Œè¯¥æ–¹æ³•å°±ä¸èƒ½ç”¨äº†ï¼Œsetup ç›¸å½“äºæ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œé™¤äº†å†…éƒ¨çš„ <code>template</code>æ¨¡æ¿ï¼Œè°éƒ½ä¸èƒ½è®¿é—®å†…éƒ¨çš„æ•°æ®å’Œæ–¹æ³•ã€‚</p><p>å¦‚æœéœ€è¦å¯¹å¤–æš´éœ² setup ä¸­çš„æ•°æ®å’Œæ–¹æ³•ï¼Œéœ€è¦ä½¿ç”¨ defineExpose APIã€‚ç¤ºä¾‹ï¼š</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">,</span> b<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-vue line-numbers-mode"><pre><code>//çˆ¶ç»„ä»¶

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Daughter</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>daughter<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Daughter <span class="token keyword">from</span> <span class="token string">&quot;./Daughter.vue&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> daughter <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;ğŸš€ğŸš€ğŸš€ğŸš€~daughter&#39;</span><span class="token punctuation">,</span>daughter<span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>


//å­ç»„ä»¶

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>å¦¾èº«{{ msg }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">,</span>defineExpose<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> msg <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;è²‚è‰&#39;</span><span class="token punctuation">)</span>
<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    msg
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="å±æ€§å’Œæ–¹æ³•æ— éœ€è¿”å›ï¼Œç›´æ¥ä½¿ç”¨ï¼" tabindex="-1">å±æ€§å’Œæ–¹æ³•æ— éœ€è¿”å›ï¼Œç›´æ¥ä½¿ç”¨ï¼ <a class="header-anchor" href="#å±æ€§å’Œæ–¹æ³•æ— éœ€è¿”å›ï¼Œç›´æ¥ä½¿ç”¨ï¼" aria-hidden="true">#</a></h3><p>è¿™å¯èƒ½æ˜¯å¸¦æ¥çš„è¾ƒå¤§ä¾¿åˆ©ä¹‹ä¸€ï¼Œåœ¨ä»¥å¾€çš„å†™æ³•ä¸­ï¼Œå®šä¹‰æ•°æ®å’Œæ–¹æ³•ï¼Œéƒ½éœ€è¦åœ¨ç»“å°¾ return å‡ºå»ï¼Œæ‰èƒ½åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ã€‚åœ¨ script setup ä¸­ï¼Œå®šä¹‰çš„å±æ€§å’Œæ–¹æ³•æ— éœ€è¿”å›ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼ç¤ºä¾‹ï¼š</p><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
   	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>My name is {{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">&#39;Sam&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="æ”¯æŒ-async-await-å¼‚æ­¥" tabindex="-1">æ”¯æŒ async await å¼‚æ­¥ <a class="header-anchor" href="#æ”¯æŒ-async-await-å¼‚æ­¥" aria-hidden="true">#</a></h3><p>æ³¨æ„åœ¨vue3çš„æºä»£ç ä¸­ï¼Œsetupæ‰§è¡Œå®Œæ¯•ï¼Œå‡½æ•° getCurrentInstance å†…éƒ¨çš„æœ‰ä¸ªå€¼ä¼šé‡Šæ”¾å¯¹ currentInstance çš„å¼•ç”¨ï¼Œawait è¯­å¥ä¼šå¯¼è‡´åç»­ä»£ç è¿›å…¥å¼‚æ­¥æ‰§è¡Œçš„æƒ…å†µã€‚æ‰€ä»¥ä¸Šè¿°ä¾‹å­ä¸­æœ€åä¸€ä¸ª getCurrentInstance() ä¼šè¿”å› nullï¼Œå»ºè®®ä½¿ç”¨å˜é‡ä¿å­˜ç¬¬ä¸€ä¸ª getCurrentInstance() è¿”å›çš„å¼•ç”¨.</p><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/post/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span> ä¸­å¯ä»¥ä½¿ç”¨é¡¶å±‚ awaitã€‚ç»“æœä»£ç ä¼šè¢«ç¼–è¯‘æˆ async setup()ï¼š
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/post/1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> r<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å¦å¤–ï¼Œawait çš„è¡¨è¾¾å¼ä¼šè‡ªåŠ¨ç¼–è¯‘æˆåœ¨ <code>await</code> ä¹‹åä¿ç•™å½“å‰ç»„ä»¶å®ä¾‹ä¸Šä¸‹æ–‡çš„æ ¼å¼ã€‚</p><blockquote><p><strong>æ³¨æ„</strong><code>async setup()</code> å¿…é¡»ä¸ <code>Suspense</code> ç»„åˆä½¿ç”¨ï¼Œ<code>Suspense</code> ç›®å‰è¿˜æ˜¯å¤„äºå®éªŒé˜¶æ®µçš„ç‰¹æ€§ã€‚æˆ‘ä»¬æ‰“ç®—åœ¨å°†æ¥çš„æŸä¸ªå‘å¸ƒç‰ˆæœ¬ä¸­å¼€å‘å®Œæˆå¹¶æä¾›æ–‡æ¡£ - å¦‚æœä½ ç°åœ¨æ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚ç…§ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Fvue-next%2Fblob%2Fmaster%2Fpackages%2Fruntime-core%2F__tests__%2Fcomponents%2FSuspense.spec.ts" target="_blank" rel="noopener noreferrer">tests</a> çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p></blockquote><h3 id="å®šä¹‰ç»„ä»¶å…¶ä»–é…ç½®" tabindex="-1">å®šä¹‰ç»„ä»¶å…¶ä»–é…ç½® <a class="header-anchor" href="#å®šä¹‰ç»„ä»¶å…¶ä»–é…ç½®" aria-hidden="true">#</a></h3><p>é…ç½®é¡¹çš„ç¼ºå¤±ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æ›´æ”¹ç»„ä»¶é€‰é¡¹ï¼Œåœ¨<code>setup</code>ä¸­æˆ‘ä»¬ç›®å‰æ˜¯æ— æ³•åšåˆ°çš„ã€‚æˆ‘ä»¬éœ€è¦åœ¨<code>ä¸Šæ–¹</code>å†å¼•å…¥ä¸€ä¸ª <code>script</code>ï¼Œåœ¨ä¸Šæ–¹å†™å…¥å¯¹åº”çš„ <code>export</code>å³å¯ï¼Œéœ€è¦å•å¼€ä¸€ä¸ª scriptã€‚</p><div class="language-html line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span> å¯ä»¥å’Œæ™®é€šçš„ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span> ä¸€èµ·ä½¿ç”¨ã€‚æ™®é€šçš„ <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span> åœ¨æœ‰è¿™äº›éœ€è¦çš„æƒ…å†µä¸‹æˆ–è®¸ä¼šè¢«ä½¿ç”¨åˆ°ï¼š
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>æ— æ³•åœ¨ <code>&lt;script setup&gt;</code> å£°æ˜çš„é€‰é¡¹ï¼Œä¾‹å¦‚ <code>inheritAttrs</code> æˆ–é€šè¿‡æ’ä»¶å¯ç”¨çš„è‡ªå®šä¹‰çš„é€‰é¡¹ã€‚</li><li>å£°æ˜å‘½åå¯¼å‡ºã€‚</li><li>è¿è¡Œå‰¯ä½œç”¨æˆ–è€…åˆ›å»ºåªéœ€è¦æ‰§è¡Œä¸€æ¬¡çš„å¯¹è±¡ã€‚</li></ul><p>åœ¨script setup å¤–ä½¿ç”¨export defaultï¼Œå…¶å†…å®¹ä¼šè¢«å¤„ç†åæ”¾å…¥åŸç»„ä»¶å£°æ˜å­—æ®µ</p><div class="language-vue line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">// æ™®é€š `&lt;script&gt;`, åœ¨æ¨¡å—èŒƒå›´ä¸‹æ‰§è¡Œ(åªæ‰§è¡Œä¸€æ¬¡)</span>
<span class="token function">runSideEffectOnce</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// å£°æ˜é¢å¤–çš„é€‰é¡¹</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;MyComponent&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">inheritAttrs</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">customOptions</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">import</span> HelloWorld <span class="token keyword">from</span> <span class="token string">&#39;../components/HelloWorld.vue&#39;</span>
    <span class="token comment">// åœ¨ setup() ä½œç”¨åŸŸä¸­æ‰§è¡Œ (å¯¹æ¯ä¸ªå®ä¾‹çš†å¦‚æ­¤)</span>
    <span class="token comment">// your code</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HelloWorld</span> <span class="token attr-name">msg</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Vue3 + TypeScript + Vite<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><blockquote><p>æ³¨æ„ï¼šVue 3 SFC ä¸€èˆ¬ä¼šè‡ªåŠ¨ä»ç»„ä»¶çš„æ–‡ä»¶åæ¨æ–­å‡ºç»„ä»¶çš„ nameã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸éœ€è¦æ˜ç¡®çš„ name å£°æ˜ã€‚å”¯ä¸€éœ€è¦çš„æƒ…å†µæ˜¯å½“ä½ éœ€è¦ <code>&lt;keep-alive&gt;</code> åŒ…å«æˆ–æ’é™¤æˆ–ç›´æ¥æ£€æŸ¥ç»„ä»¶çš„é€‰é¡¹æ—¶ï¼Œä½ éœ€è¦è¿™ä¸ªåå­—ã€‚</p></blockquote></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/Zhang_blog/preparation/01_promise" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>1.è¿™æ¬¡ ä¸€æ¬¡æ€§ææ‡‚promise</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/Zhang_blog/preparation/03_mysql80å®‰è£…æ•™ç¨‹" data-v-38ede35f><span class="text" data-v-38ede35f>3.mysql80å®‰è£…æ•™ç¨‹</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"index.md\":\"0b9e1158\",\"preparation_01_promise.md\":\"f6b1e403\",\"preparation_02_script setupè¯­æ³•ç³–.md\":\"3f6e6438\",\"preparation_03_mysql80å®‰è£…æ•™ç¨‹.md\":\"f55906a5\",\"preparation_04_reactç¬”è®°.md\":\"59617ad2\",\"preparation_05_stylusæ ·å¼è½¬æ¢æˆsass scss.md\":\"f8ed81e7\",\"preparation_å‰ç«¯åŸºç¡€_01.htmlç¯‡.md\":\"2bf1dc5a\",\"preparation_å‰ç«¯åŸºç¡€_02.cssç¯‡.md\":\"2a5292a5\",\"preparation_å‰ç«¯åŸºç¡€_03.ä¸‰ç§æœ¬åœ°å­˜å‚¨çš„åŒºåˆ«.md\":\"4b8bb07b\",\"preparation_å‰ç«¯åŸºç¡€_04.promiseæ˜¯ä»€ä¹ˆä¸ä½¿ç”¨æ–¹æ³•.md\":\"2dc68e29\",\"preparation_å‰ç«¯åŸºç¡€_05.jsæ•°æ®ç±»å‹.md\":\"2858bff8\",\"preparation_å‰ç«¯åŸºç¡€_06.javascriptæœ‰å‡ ç§æ–¹æ³•åˆ¤æ–­å˜é‡çš„ç±»å‹.md\":\"045839f4\",\"preparation_å‰ç«¯åŸºç¡€_07.jsé—­åŒ….md\":\"9594b9b2\",\"preparation_å‰ç«¯åŸºç¡€_08.varã€letã€constä¹‹é—´çš„åŒºåˆ«.md\":\"18038c5a\",\"preparation_å‰ç«¯åŸºç¡€_09.åœ°å€æ è¾“å…¥ url æ•²ä¸‹å›è½¦åå‘ç”Ÿäº†ä»€ä¹ˆ.md\":\"df32c578\",\"preparation_è®¡ç®—æœºç½‘ç»œ_01.è·¨åŸŸ.md\":\"f1e8c94c\"}")</script>
    <script type="module" async src="/Zhang_blog/assets/app.b3477ce4.js"></script>
    
  </body>
</html>